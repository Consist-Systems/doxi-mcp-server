{
  "toolName": "DoxiFlows",
  "category": "Flows",
  "description": "Manages document signing flows, templates, kits, users and documents via the Doxi Sign API.",
  "docsBaseUrl": "https://apidocs.doxi-sign.com/",

  "auth": {
    "type": "basic",
    "description": "Doxi API credentials",
    "fields": [ "username", "password" ]
  },

  "methods": [
    {
      "name": "getAllFlows",
      "description": "Retrieves all signing flows available for the current tenant.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      },
      "outputSchema": {
        "type": "array",
        "description": "Array of signing flow IDs and basic metadata"
      }
    },

    {
      "name": "getFlow",
      "description": "Retrieves full metadata for a signing flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" }
        },
        "required": [ "signFlowId" ]
      },
      "outputSchema": {
        "type": "object",
        "description": "Flow metadata JSON"
      }
    },

    {
      "name": "getDocument",
      "description": "Downloads the PDF document associated with a signing flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" },
          "withSigns": {
            "type": "boolean",
            "default": true
          }
        },
        "required": [ "signFlowId" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    },

    {
      "name": "searchFlows",
      "description": "Searches signing flows by filters such as signer, date range, status, kit, and custom fields.",
      "inputSchema": {
        "$ref": "#/types/GetFlowsByFilterRequest"
      },
      "outputSchema": {
        "type": "object",
        "description": "Search result with matching flows"
      }
    },

    {
      "name": "getFlowsStatus",
      "description": "Retrieves statuses for multiple flows in a single call.",
      "inputSchema": {
        "$ref": "#/types/GetFlowsStatusRequest"
      },
      "outputSchema": {
        "type": "array",
        "description": "Array of flow status objects"
      }
    },

    {
      "name": "getFlowStatus",
      "description": "Gets the current status of a specific signing flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" }
        },
        "required": [ "signFlowId" ]
      },
      "outputSchema": {
        "type": "object",
        "description": "Flow status including signers, sender, and custom fields"
      }
    },

    {
      "name": "setFlowAction",
      "description": "Applies an action (approve, reject, delegate) to a signing flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" },
          "request": { "$ref": "#/types/SetFlowActionRequest" }
        },
        "required": [ "signFlowId", "request" ]
      },
      "outputSchema": {
        "type": "object",
        "description": "Action execution result"
      }
    },

    {
      "name": "getFlowAttachments",
      "description": "Downloads all attachments of a flow as a ZIP archive.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" }
        },
        "required": [ "signFlowId" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    },

    {
      "name": "getFlowAttachmentField",
      "description": "Downloads a specific attachment field from a flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" },
          "request": { "$ref": "#/types/GetFlowAttachmentFieldRequest" }
        },
        "required": [ "signFlowId", "request" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    },

    {
      "name": "addAttachmentBase64ToFlow",
      "description": "Adds a base64-encoded attachment to an existing flow.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signFlowId": { "type": "string" },
          "request": { "$ref": "#/types/AddAttachmentBase64ToFlowRequest" }
        },
        "required": [ "signFlowId", "request" ]
      },
      "outputSchema": {
        "type": "object",
        "description": "Attachment creation result"
      }
    },

    {
      "name": "createFlowFromTemplate",
      "description": "Creates a new signing flow from an existing template.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "templateId": { "type": "string" },
          "request": { "$ref": "#/types/CreateFlowFromTemplateRequest" }
        },
        "required": [ "templateId", "request" ]
      },
      "outputSchema": {
        "type": "object",
        "description": "Created flow metadata and signer links"
      }
    },

    {
      "name": "documentInfoBase64",
      "description": "Extracts structured information from a base64-encoded document.",
      "inputSchema": {
        "$ref": "#/types/GetDocumentInfoRquest"
      },
      "outputSchema": {
        "type": "object",
        "description": "Extracted document structure"
      }
    },

    {
      "name": "searchInDocumentBase64",
      "description": "Searches for text in a base64-encoded document.",
      "inputSchema": {
        "$ref": "#/types/SearchInDocumentBase64Request"
      },
      "outputSchema": {
        "type": "object",
        "description": "Search result with match locations"
      }
    },

    {
      "name": "mergeDocuments",
      "description": "Merges multiple PDF documents into a single PDF.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "documents": {
            "type": "array",
            "items": { "$ref": "#/types/DataContent" }
          }
        },
        "required": [ "documents" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    },

    {
      "name": "addTextsToPdf",
      "description": "Adds text elements to a PDF document and returns the modified PDF.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "inputFileBase64": { "type": "string" },
          "texts": {
            "type": "array",
            "items": { "$ref": "#/types/TextElement" }
          }
        },
        "required": [ "inputFileBase64", "texts" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    },

    {
      "name": "AddTexts",
      "description": "Adds text elements to a PDF document using AI based on a prompt and returns the modified PDF. The inputFile parameter accepts file paths (e.g., 'C:\\path\\to\\file.pdf' or './document.pdf'), file URIs (e.g., 'file:///path/to/file.pdf'), or base64-encoded strings. The prompt describes what text should be added to the document.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "Text describing what should be added to the document"
          },
          "inputFile": {
            "type": "string",
            "description": "PDF file input as file path, file URI, or base64-encoded string. Examples: 'C:\\path\\to\\file.pdf', './document.pdf', 'file:///path/to/file.pdf', or base64 string."
          }
        },
        "required": [ "prompt", "inputFile" ]
      },
      "outputSchema": {
        "$ref": "#/types/DataContent"
      }
    }
  ],

  "enums": {
    "ParticipantKeyType": {
      "type": "integer",
      "values": {
        "UserId": 0,
        "UserEmail": 1,
        "UserPhone": 2,
        "UserName": 3,
        "GroupId": 4
      }
    }
  },

  "types": {
    "DataContent": {
      "type": "object",
      "properties": {
        "uri": { "type": "string" },
        "contentType": { "type": "string" },
        "data": {
          "type": "string",
          "format": "binary"
        }
      },
      "required": [ "uri", "data" ]
    },

    "GetFlowsByFilterRequest": {
      "type": "object",
      "properties": {
        "signer": { "type": "string" },
        "sender": { "type": "string" },
        "fromDate": {
          "type": "string",
          "format": "date-time"
        },
        "toDate": {
          "type": "string",
          "format": "date-time"
        },
        "description": { "type": "string" },
        "kitId": { "type": "string" },
        "customFields": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        }
      }
    },

    "GetFlowsStatusRequest": {
      "type": "object",
      "properties": {
        "signFlowIds": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": [ "signFlowIds" ]
    },

    "SetFlowActionRequest": {
      "type": "object",
      "properties": {
        "action": { "type": "string" },
        "comment": { "type": "string" },
        "delegateTo": { "type": "string" }
      },
      "required": [ "action" ]
    },

    "GetFlowAttachmentFieldRequest": {
      "type": "object",
      "properties": {
        "fieldId": { "type": "string" }
      },
      "required": [ "fieldId" ]
    },

    "AddAttachmentBase64ToFlowRequest": {
      "type": "object",
      "properties": {
        "base64DocumentFile": { "type": "string" },
        "documentFileName": { "type": "string" },
        "contentType": { "type": "string" }
      },
      "required": [ "base64DocumentFile", "documentFileName" ]
    },

    "CreateFlowFromTemplateRequest": {
      "type": "object",
      "properties": {
        "users": {
          "type": "array",
          "items": { "type": "object" }
        },
        "recipients": {
          "type": "array",
          "items": { "type": "object" }
        },
        "description": { "type": "string" },
        "customFields": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        }
      }
    },

    "GetDocumentInfoRquest": {
      "type": "object",
      "properties": {
        "base64DocumentFile": { "type": "string" },
        "documentFileName": { "type": "string" }
      },
      "required": [ "base64DocumentFile", "documentFileName" ]
    },

    "SearchInDocumentBase64Request": {
      "type": "object",
      "properties": {
        "base64DocumentFile": { "type": "string" },
        "searchText": { "type": "string" }
      },
      "required": [ "base64DocumentFile", "searchText" ]
    },

    "TextElement": {
      "type": "object",
      "properties": {
        "text": { "type": "string" },
        "font": {
          "type": "string",
          "default": "Helvetica"
        },
        "fontSize": { "type": "integer" },
        "x": { "type": "number" },
        "y": { "type": "number" },
        "width": { "type": "number" },
        "height": { "type": "number" },
        "pageNumber": { "type": "integer" }
      },
      "required": [ "text", "fontSize", "x", "y", "width", "height", "pageNumber" ]
    }
  }
}
