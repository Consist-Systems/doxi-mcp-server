{
  "toolName": "FlowsTool",
  "category": "Flows",
  "description": "Manages document signing flows, templates, kits, users and webhooks via the Doxi Sign API.",
  "docsBaseUrl": "https://apidocs.doxi-sign.com/",
  "notes": [
    "All methods require username and password (Doxi API credentials).",
    "When the underlying HTTP API returns JSON, the MCP tool returns TextContent with a JSON string.",
    "When the underlying HTTP API returns a binary stream (PDF, ZIP, etc.), the MCP tool returns DataContent with bytes and contentType."
  ],
  "methods": [
    {
      "name": "GetAllFlows",
      "summary": "Retrieves all signing flows available for the current tenant.",
      "endpoint": "GET /flow",
      "returns": "JSON array of signing flows (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password."
      }
    },
    {
      "name": "AddSignFlow",
      "summary": "Creates a new signing flow and uploads a document.",
      "endpoint": "POST /flow",
      "returns": "CreateFlowResponse JSON with SignFlowId and signer links (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "createFlowJsonRequest": "ExCreateFlowRequestBase JSON object describing the flow (SenderKey, Description, FlowElements, Users, Recipients, reminders, expiration, etc.).",
        "documentFile": "Raw document bytes for the flow (PDF/Word/Image). In MCP this is provided as DataContent.data and sent as a file/stream body."
      }
    },
    {
      "name": "EditSignFlow",
      "summary": "Edits an existing signing flow (recipients, fields, metadata, etc.).",
      "endpoint": "POST /v2/flow/edit",
      "returns": "EditFlowResponse JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "EditFlowRequest JSON as defined in the OpenAPI."
      }
    },
    {
      "name": "GetDocument",
      "summary": "Downloads the PDF document associated with a signing flow.",
      "endpoint": "GET /flow/{signFlowId}/Document",
      "returns": "PDF byte array as DataContent (contentType = \"application/pdf\").",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow.",
        "withSigns": "Boolean: if true, includes signatures/overlays; if false, returns the original document (default: true)."
      }
    },
    {
      "name": "GetFlow",
      "summary": "Retrieves full metadata for a signing flow.",
      "endpoint": "GET /flow/{signFlowId}",
      "returns": "Flow metadata JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow."
      }
    },
    {
      "name": "SearchFlow",
      "summary": "Searches signing flows by filters such as signer, date range, status, custom fields, kit, etc.",
      "endpoint": "POST /ex/flow/search",
      "returns": "Search result JSON with matching flows (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "GetFlowsByFilterRequest JSON (SignatureFlowStatus, Signer, Sender, FromDate, ToDate, Description, KitId, CustomFields, etc.)."
      }
    },
    {
      "name": "GetFlowsStatus",
      "summary": "Retrieves statuses for multiple flows in a single call.",
      "endpoint": "POST /ex/flow/status",
      "returns": "Array of flow status responses (TextContent, JSON).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "GetFlowsStatusRequest JSON containing an array of SignFlowIds."
      }
    },
    {
      "name": "GetFlowStatus",
      "summary": "Gets the current status of a specific signing flow.",
      "endpoint": "GET /ex/flow/{signFlowId}/status",
      "returns": "GetFlowStatusResponse JSON (TextContent) including signers, sender, status, and custom fields.",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow."
      }
    },
    {
      "name": "SetFlowAction",
      "summary": "Sets an action on a flow such as approve, reject, delegate, etc.",
      "endpoint": "POST /flow/{signFlowId}/action",
      "returns": "JSON { success: true, data: { signFlowId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow.",
        "request": "SetFlowActionRequest JSON describing the action (e.g. Approve, Decline, Delegate) and optional message."
      }
    },
    {
      "name": "SetSignatures",
      "summary": "Updates or adds signatures to a flow.",
      "endpoint": "POST /flow/{signFlowId}/SetSignatures",
      "returns": "JSON { success: true, data: { signFlowId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow.",
        "request": "ExSetSignFlowRequest JSON including signature data for one or more signers."
      }
    },
    {
      "name": "ReplaceSigner",
      "summary": "Replaces an existing signer in a signing flow.",
      "endpoint": "POST /flow/ReplaceSigner",
      "returns": "JSON { success: true } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "ExReplaceSignerRequest JSON including old and new signer keys and related options."
      }
    },
    {
      "name": "GetFlowAttachments",
      "summary": "Gets all attachments of a flow as a single ZIP.",
      "endpoint": "GET /flow/{signFlowId}/attachments",
      "returns": "Byte array (ZIP) as DataContent (contentType = \"application/octet-stream\").",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow."
      }
    },
    {
      "name": "GetFlowAttachmentField",
      "summary": "Gets a specific attachment field from a flow.",
      "endpoint": "POST /flow/{signFlowId}/AttachmentField",
      "returns": "Attachment file bytes as DataContent (contentType = \"application/octet-stream\").",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow.",
        "request": "GetFlowAttachmentFieldRequest JSON (identifies the field/attachment to download)."
      }
    },
    {
      "name": "AddAttachmentAsBase64ToFlow",
      "summary": "Adds a base64-encoded attachment to an existing flow.",
      "endpoint": "POST /flow/{signFlowId}/attachments/base64",
      "returns": "AddAttachmentAsBase64ToFlowResponse JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "signFlowId": "The unique ID of the signing flow.",
        "request": "AddAttachmentBase64ToFlowRequest JSON containing Base64Content, FileName and optional metadata."
      }
    },
    {
      "name": "CreateFlowFromTemplate",
      "summary": "Creates a new signing flow from an existing template.",
      "endpoint": "POST /ex/template/CreateFlowFromTemplate/{templateId}",
      "returns": "CreateFlowResponse-like JSON with new SignFlowId and signer links (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "templateId": "The template ID to base the flow on.",
        "request": "CreateFlowFromTemplateRequest JSON (Description, SenderKey, Users, Recipients, CustomFields, etc.)."
      }
    },
    {
      "name": "AddTemplate",
      "summary": "Creates a new user template from a document and template definition.",
      "endpoint": "POST /ex/template",
      "returns": "Template creation result JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "addTemplateRequest": "AddTemplateRequest JSON. See types.AddTemplateRequest. IMPORTANT: TemplateDocument must be filled from the attached file: TemplateDocument.uri = original file name, TemplateDocument.data = raw file bytes."
      },
      "examples": {
        "callWithAttachedPdf": {
          "description": "Create a Hebrew registration form template from an uploaded PDF.",
          "arguments": {
            "username": "your_username",
            "password": "your_password",
            "addTemplateRequest": {
              "templateName": "שאלון הרשמה לקורס מורי דרך - מכון אבשלום",
              "flowElements": [
                {
                  "label": "שם משפחה",
                  "type": "TextBox",
                  "required": true
                }
              ],
              "users": [],
              "sendMethodType": "QueuedFlow",
              "templateType": "Standard",
              "captchaDisabled": false,
              "preliminaryText": null,
              "signFlowDescriptionMessage": null,
              "isAutomaticRemainder": false,
              "dayesForAutomaticRemainder": 0,
              "isSendApprovalMailToAllSigners": false,
              "recipients": [],
              "disableSBS": false,
              "flowTwoFactorEnabled": null,
              "flowExpirationDate": null,
              "senderKey": {
                "key": "doxiapiuser@mydomain.com",
                "type": "UserEmail"
              },
              "templateDocument": {
                "uri": "registration_tour_guide_avshalom.pdf",
                "data": "<binary of the attached PDF>",
                "contentType": "application/pdf"
              }
            }
          }
        }
      }
    },
    {
      "name": "UpdateTemplate",
      "summary": "Updates an existing template definition.",
      "endpoint": "PUT /ex/template/{templateId}",
      "returns": "JSON { success: true, data: { templateId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "templateId": "The ID of the template to update.",
        "request": "ExUpdateTemplateRequest JSON (TemplateName, FlowElements, Users, SendMethodType, TemplateType, CaptchaDisabled, PreliminaryText, SignFlowDescriptionMessage, IsAutomaticRemainder, DayesForAutomaticRemainder, IsSendApprovalMailToAllSigners, Recipients, DisableSBS, FlowTwoFactorEnabled, FlowExpirationDate, ImagesList)."
      }
    },
    {
      "name": "DeleteUserTemplate",
      "summary": "Deletes a user template.",
      "endpoint": "DELETE /ex/template/{templateId}",
      "returns": "JSON { success: true, data: { templateId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "templateId": "The ID of the template to delete.",
        "request": "DeleteTemplateRequest JSON (additional delete options if any)."
      }
    },
    {
      "name": "GetTemplate",
      "summary": "Retrieves template metadata.",
      "endpoint": "GET /ex/template/{templateId}",
      "returns": "Template metadata JSON (TextContent), including TemplateName, FlowElements, Users, SendMethodType, TemplateType, etc.",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "templateId": "The ID of the template."
      }
    },
    {
      "name": "DeleteAttachmentFromTemplate",
      "summary": "Deletes an attachment from a template.",
      "endpoint": "DELETE /ex/template/{templateId}/attachments/{attachmentId}",
      "returns": "JSON { success: true, data: { templateId, attachmentId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "templateId": "The template ID.",
        "attachmentId": "The attachment ID to remove from the template."
      }
    },
    {
      "name": "DocumentInfo",
      "summary": "Extracts structured information from a document file (e.g. pages, fields, text).",
      "endpoint": "POST /ex/document/info",
      "returns": "Document info JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "document": "Raw document bytes (PDF). In MCP this is provided as DataContent.data and sent as a file/stream body."
      }
    },
    {
      "name": "DocumentInfoBase64",
      "summary": "Extracts document info from a base64-encoded document.",
      "endpoint": "POST /ex/document/info/base64",
      "returns": "Document info JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "GetDocumentInfoRquest JSON (Base64DocumentFile, DocumentFileName, and optional settings)."
      }
    },
    {
      "name": "SearchInDocumentBase64",
      "summary": "Searches for text or patterns in a base64-encoded document.",
      "endpoint": "POST /ex/document/search/base64",
      "returns": "Search result JSON (TextContent) with matched locations.",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "SearchInDocumentBase64Request JSON containing Base64DocumentFile, search term(s), and options."
      }
    },
    {
      "name": "SearchInDocument",
      "summary": "Searches for text or patterns in an uploaded document.",
      "endpoint": "POST /ex/document/search",
      "returns": "Search result JSON (TextContent) with matched locations.",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "file": "Raw document bytes (PDF) to search in.",
        "request": "SearchInDocumentRequest JSON containing search term(s) and options."
      }
    },
    {
      "name": "MergeDocuments",
      "summary": "Merges multiple PDF documents into a single PDF.",
      "endpoint": "POST /ex/document/merge",
      "returns": "Merged PDF as DataContent (contentType = \"application/pdf\").",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "documents": "Array of PDF byte arrays to merge, in order."
      }
    },
    {
      "name": "AddKit",
      "summary": "Creates a new kit (a reusable bundle of flows or templates).",
      "endpoint": "POST /ex/kit",
      "returns": "Kit creation result JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "ExAddKitRequest JSON describing the kit (name, flows/templates, settings)."
      }
    },
    {
      "name": "UpdateKit",
      "summary": "Updates an existing kit.",
      "endpoint": "PUT /ex/kit/{kitId}",
      "returns": "JSON { success: true, data: { kitId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "kitId": "The ID of the kit to update.",
        "request": "ExUpdateKitRequest JSON with updated kit configuration."
      }
    },
    {
      "name": "GetKit",
      "summary": "Retrieves metadata for a kit.",
      "endpoint": "GET /ex/kit/{kitId}",
      "returns": "Kit metadata JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "kitId": "The ID of the kit."
      }
    },
    {
      "name": "GetKits",
      "summary": "Lists all kits available for the tenant.",
      "endpoint": "GET /ex/kit",
      "returns": "JSON array of kits (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password."
      }
    },
    {
      "name": "GetUserGroups",
      "summary": "Retrieves groups for a user identified by key type and value.",
      "endpoint": "GET /ex/user/{searchType}/{searchValue}/groups",
      "returns": "JSON array of groups (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "searchType": "ParticipantKeyType enum value (e.g. UserEmail, UserPhone).",
        "searchValue": "Search key for the user (e.g. email address or phone)."
      }
    },
    {
      "name": "GetUserTemplates",
      "summary": "Retrieves templates for a user identified by key type and value.",
      "endpoint": "GET /ex/user/{searchType}/{searchValue}/templates",
      "returns": "JSON array of templates (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "searchType": "ParticipantKeyType enum value.",
        "searchValue": "Value for the user (e.g. email)."
      }
    },
    {
      "name": "GetUserIdByEmail",
      "summary": "Retrieves the user ID by email.",
      "endpoint": "GET /ex/user/byEmail/{email}/id",
      "returns": "JSON object with userId (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "email": "Email address of the user."
      }
    },
    {
      "name": "GetUsers",
      "summary": "Queries users with filter parameters.",
      "endpoint": "GET /ex/users",
      "returns": "Paged results JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "queryParams": "Dictionary<string, object> of filter fields (as query string)."
      }
    },
    {
      "name": "AddSubscription",
      "summary": "Adds a new webhook subscription.",
      "endpoint": "POST /ex/webhook",
      "returns": "WebhookSubscriptionResponse JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "WebhookSubscription JSON (URL, events, secrets, filters, etc.)."
      }
    },
    {
      "name": "WebHookCheck",
      "summary": "Validates and previews a webhook payload.",
      "endpoint": "POST /ex/webhook/check",
      "returns": "Webhook preview JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "request": "WebhookSubscription JSON."
      }
    },
    {
      "name": "GetAllWebhookSubscription",
      "summary": "Lists all webhook subscriptions.",
      "endpoint": "GET /ex/webhook",
      "returns": "JSON array of webhook subscriptions (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password."
      }
    },
    {
      "name": "SearchWebhookCallLogs",
      "summary": "Searches webhook call logs for a subscription.",
      "endpoint": "POST /ex/webhook/{subscriptionId}/logs/search",
      "returns": "Paged logs JSON (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "subscriptionId": "Webhook subscription ID.",
        "request": "RequestWebhookSenderLog JSON (filters for log search)."
      }
    },
    {
      "name": "UpdateWebhookSubscription",
      "summary": "Updates a webhook subscription.",
      "endpoint": "PUT /ex/webhook/{subscriptionId}",
      "returns": "JSON { success: true, data: { subscriptionId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "subscriptionId": "Webhook subscription ID.",
        "request": "WebhookSubscription JSON."
      }
    },
    {
      "name": "DeleteSubscription",
      "summary": "Deletes a webhook subscription.",
      "endpoint": "DELETE /ex/webhook/{subscriptionId}",
      "returns": "JSON { success: true, data: { subscriptionId } } (TextContent).",
      "params": {
        "username": "Doxi API username.",
        "password": "Doxi API password.",
        "subscriptionId": "Webhook subscription ID."
      }
    }
  ],
  "types": {
    "DataContent": {
      "description": "Wrapper for binary data in MCP. Used for files (PDFs, ZIPs, etc.).",
      "type": "object",
      "properties": {
        "uri": {
          "type": "string",
          "description": "Original file name, e.g. \"document.pdf\"."
        },
        "data": {
          "type": "string",
          "description": "Raw bytes of the file as a binary buffer (in MCP this is sent as bytes, not base64)."
        },
        "contentType": {
          "type": "string",
          "description": "MIME type, e.g. \"application/pdf\"."
        }
      },
      "required": [ "uri", "data" ]
    },
    "ParticipantKey": {
      "description": "Identifies a user or group in Doxi.",
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "description": "The key value (e.g. email, phone, userId)."
        },
        "type": {
          "type": "string",
          "description": "ParticipantKeyType enum value: UserId, UserEmail, UserPhone, UserName, GroupId."
        }
      },
      "required": [ "key", "type" ]
    },
    "AddTemplateRequest": {
      "description": "Request to add a new template. Wraps ExBaseTemplate plus SenderKey and TemplateDocument.",
      "type": "object",
      "properties": {
        "templateName": {
          "type": "string",
          "description": "The name of the template."
        },
        "flowElements": {
          "type": "array",
          "description": "All the elements (fields) of the template.",
          "items": {
            "type": "object",
            "description": "Simplified field definition (API uses ExTemplatFlowElement)."
          }
        },
        "users": {
          "type": "array",
          "description": "Template users (ExTemplateUser).",
          "items": {
            "type": "object"
          }
        },
        "sendMethodType": {
          "type": "string",
          "description": "SendMethodType enum (QueuedFlow, DirectFlow, etc.)."
        },
        "templateType": {
          "type": "string",
          "description": "TemplateType enum: Standard, AnonymousEnable, AnonymousDisable."
        },
        "captchaDisabled": {
          "type": "boolean"
        },
        "preliminaryText": {
          "type": "string"
        },
        "signFlowDescriptionMessage": {
          "type": "string"
        },
        "isAutomaticRemainder": {
          "type": "boolean"
        },
        "dayesForAutomaticRemainder": {
          "type": "integer"
        },
        "isSendApprovalMailToAllSigners": {
          "type": "boolean"
        },
        "recipients": {
          "type": "array",
          "description": "All CC users of the flow created from this template.",
          "items": {
            "$ref": "#/types/ParticipantKey"
          }
        },
        "disableSBS": {
          "type": "boolean",
          "description": "Disable/Enable side-by-side mode for created flows."
        },
        "flowTwoFactorEnabled": {
          "type": "boolean"
        },
        "flowExpirationDate": {
          "type": "string",
          "format": "date-time"
        },
        "imagesList": {
          "type": "object",
          "description": "Dictionary of images for elements of type Image (key: image id, value: data URL string).",
          "additionalProperties": {
            "type": "string",
            "nullable": true
          }
        },
        "senderNotificationMailsToSend": {
          "type": "array",
          "description": "NotificationMails enum values.",
          "items": {
            "type": "string"
          }
        },
        "senderKey": {
          "$ref": "#/types/ParticipantKey"
        },
        "templateDocument": {
          "$ref": "#/types/DataContent"
        }
      },
      "required": [ "templateName", "senderKey", "templateDocument" ]
    },
    "GetDocumentInfoRquest": {
      "description": "Request object for /ex/document/info/base64.",
      "type": "object",
      "properties": {
        "base64DocumentFile": {
          "type": "string",
          "description": "The document as a base64 string."
        },
        "documentFileName": {
          "type": "string",
          "description": "The file name of the document."
        }
      },
      "required": [ "base64DocumentFile", "documentFileName" ]
    },
    "SearchInDocumentBase64Request": {
      "description": "Request object for /ex/document/search/base64.",
      "type": "object",
      "properties": {
        "base64DocumentFile": {
          "type": "string"
        },
        "searchText": {
          "type": "string",
          "description": "Text to search in the document."
        }
      },
      "required": [ "base64DocumentFile", "searchText" ]
    },
    "SearchInDocumentRequest": {
      "description": "Request object for /ex/document/search.",
      "type": "object",
      "properties": {
        "searchText": {
          "type": "string",
          "description": "Text to search in the document."
        }
      },
      "required": [ "searchText" ]
    }
  }
}
